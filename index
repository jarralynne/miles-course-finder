
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Miles College — Course Finder</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    :root {
      --bg: #ffffff;
      --card: #f7f7f7;
      --text: #222;
      --muted: #555;
      --accent: #5c7cfa;
      --border: #ddd;
    }
    body { font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; background: var(--bg); color: var(--text); margin: 24px; }
    h1 { margin-bottom: 6px; }
    p { color: var(--muted); }
    label { display: block; font-weight: 600; margin-top: 14px; }
    input, select {
      width: 100%; padding: 12px; margin-top: 6px; border: 1px solid var(--border);
      border-radius: 6px; font-size: 16px;
    }
    .row { display: grid; grid-template-columns: 1fr 1fr; gap: 16px; }
    .result {
      margin-top: 20px; background: var(--card); border: 1px solid var(--border);
      border-radius: 10px; padding: 18px;
    }
    .meta { color: var(--muted); font-size: 0.95rem; margin-top: 8px; }
    .outcomes { margin-top: 12px; }
    .hidden { display: none; }
    .badge { display: inline-block; background: #eef; color: #244;
      padding: 3px 8px; margin-right: 8px; border-radius: 999px; font-size: 0.85rem;
    }
    .footer { margin-top: 28px; font-size: 0.9rem; color: var(--muted); }
  </style>
</head>
<body>
  <h1>Miles College — Course Finder</h1>
  <p>Search by course code (e.g., <strong>AC 210</strong>) or title (e.g., <strong>Biology</strong>), or browse all courses below.</p>

  <div class="row">
    <div>
      <label for="query">Search</label>
      <input id="query" type="text" placeholder="Type course code or title…" />
    </div>
    <div>
      <label for="picker">Browse all courses</label>
      <select id="picker"><option value="">— Select a course —</option></select>
    </div>
  </div>

  <div id="result" class="result hidden">
    <h2 id="title"></h2>
    <div class="meta">
      <span class="badge"><strong>Code:</strong> <span id="code"></span></span>
      <span class="badge"><strong>Credits:</strong> <span id="credits"></span></span>
      <span class="badge"><strong>Prerequisites:</strong> <span id="prereq"></span></span>
      <span class="badge"><strong>Co-requisites:</strong> <span id="coreq"></span></span>
    </div>
    <p id="desc"></p>
    <div class="outcomes">
      <strong>Learning Outcomes:</strong>
      <ul id="outcomes"></ul>
    </div>
  </div>

  <div class="footer">
    <em>Data source:</em> Miles College Academic Catalog (2025–2026) + curated CSV with outcomes.
  </div>

  <script>
    // 1) CSV hosted in your repo (raw link)
    const CSV_URL = 'https://raw.githubusercontent.com/jarralynne/miles-course-finder/main/Miles_College_Course_Descriptions_with_Outcomes.csv';

    // 2) Minimal CSV parser (quoted cells supported)
    function parseCSV(text) {
      const lines = text.split(/\r?\n/).filter(l => l.trim().length > 0);
      const headers = splitCSVLine(lines[0]);
      const rows = [];
      for (let i = 1; i < lines.length; i++) {
        const cells = splitCSVLine(lines[i]);
        const obj = {};
        headers.forEach((h, idx) => obj[h] = cells[idx] ?? '');
        rows.push(obj);
      }
      return rows;
    }
    function splitCSVLine(line) {
      const out = []; let cur = ''; let inQuotes = false;
      for (let i = 0; i < line.length; i++) {
        const ch = line[i];
        if (ch === '"') {
          if (inQuotes && line[i+1] === '"') { cur += '"'; i++; }
          else { inQuotes = !inQuotes; }
        } else if (ch === ',' && !inQuotes) { out.push(cur); cur = ''; }
        else { cur += ch; }
      }
      out.push(cur);
      return out.map(s => s.trim());
    }

    // 3) UI helpers
    const picker = document.getElementById('picker');
    const queryInput = document.getElementById('query');
    const resultCard = document.getElementById('result');

    function render(course) {
      if (!course) { resultCard.classList.add('hidden'); return; }
      document.getElementById('title').textContent = course['Course Title'] || '';
      document.getElementById('code').textContent = course['Course Code'] || '';
      document.getElementById('credits').textContent = course['Credits'] || '';
      document.getElementById('prereq').textContent = course['Prerequisites'] || '—';
      document.getElementById('coreq').textContent = course['Co-requisites'] || '—';
      document.getElementById('desc').textContent = course['Description'] || '';

      const ul = document.getElementById('outcomes');
      ul.innerHTML = '';
      const outcomesRaw = (course['Learning Outcomes'] || '').split(';').map(x => x.trim()).filter(Boolean);
      outcomesRaw.forEach(o => { const li = document.createElement('li'); li.textContent = o; ul.appendChild(li); });

      resultCard.classList.remove('hidden');
    }

    function fillDropdown(courses) {
      const sorted = [...courses].sort((a, b) => (a['Course Code'] || '').localeCompare(b['Course Code'] || ''));
      sorted.forEach(c => {
        const opt = document.createElement('option');
        opt.value = c['Course Code'];
        opt.textContent = `${c['Course Code']} — ${c['Course Title']}`;
        picker.appendChild(opt);
      });
    }

    function findCourse(courses, query) {
      const q = query.toLowerCase();
      return courses.find(c =>
        (c['Course Code'] || '').toLowerCase() === q ||
        (c['Course Title'] || '').toLowerCase().includes(q)
      );
    }

    // 4) Load CSV and wire up events
    let DATA = [];

    fetch(CSV_URL)
      .then(r => {
        if (!r.ok) throw new Error('Failed to fetch CSV: ' + r.status);
        return r.text();
      })
      .then(text => {
        DATA = parseCSV(text);
        fillDropdown(DATA);
      })
      .catch(err => {
        console.error(err);
        alert('Could not load course data. Check CSV_URL or repository permissions.');
      });

    queryInput.addEventListener('input', e => {
      const q = e.target.value.trim();
      if (!q) { render(null); picker.value = ''; return; }
      const course = findCourse(DATA, q);
      render(course || null);
      if (course) picker.value = course['Course Code'];
    });

    picker.addEventListener('change', e => {
      const code = e.target.value;
      const course = DATA.find(c => c['Course Code'] === code);
      render(course || null);
      queryInput.value = code ? code : '';
    });
  </script>
</body>
</html>
``
